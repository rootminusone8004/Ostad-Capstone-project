# Kubelet configuration for Kubernetes {{ kubernetes_version }}
# Generated by Ansible for {{ ansible_hostname }}

apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration
authentication:
  anonymous:
    enabled: false
  webhook:
    enabled: true
authorization:
  mode: Webhook
clusterDNS:
  - {{ cluster_dns_ip }}
clusterDomain: {{ cluster_domain }}
containerRuntimeEndpoint: unix:///var/run/containerd/containerd.sock
cpuManagerPolicy: none
evictionHard:
  memory.available: "{{ kubelet_config.eviction_hard.memory_available }}"
  nodefs.available: "{{ kubelet_config.eviction_hard.nodefs_available }}"
  imagefs.available: "{{ kubelet_config.eviction_hard.imagefs_available }}"
failSwapOn: false
hairpinMode: promiscuous-bridge
healthzBindAddress: 0.0.0.0
healthzPort: 10248
httpCheckFrequency: 20s
imageMinimumGCAge: 2m0s
logging: {}
memorySwap: {}
nodeStatusReportFrequency: 10s
nodeStatusUpdateFrequency: 10s
resolvConf: /etc/resolv.conf
rotateCertificates: true
runtimeRequestTimeout: 2m0s
shutdownGracePeriod: 30s
shutdownGracePeriodCriticalPods: 10s
staticPodPath: /etc/kubernetes/manifests
streamingConnectionIdleTimeout: 4h0m0s
syncFrequency: 1m0s
systemReserved:
  cpu: "{{ kubelet_config.system_reserved.cpu }}"
  memory: "{{ kubelet_config.system_reserved.memory }}"
  ephemeral-storage: "{{ kubelet_config.system_reserved.ephemeral_storage }}"
kubeReserved:
  cpu: "{{ kubelet_config.kube_reserved.cpu }}"
  memory: "{{ kubelet_config.kube_reserved.memory }}"
  ephemeral-storage: "{{ kubelet_config.kube_reserved.ephemeral_storage }}"
volumeStatsAggPeriod: 1m0s
